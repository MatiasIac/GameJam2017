<html>
    <body>
        <canvas id="canvas" width="640" height="480"></canvas>

        <script language="Javascript" src="framework/jsGFwk.js"></script>
        <script language="Javascript" src="framework/jsGFwk2dFastAnimation.js"></script>
        <script language="Javascript" src="framework/jsGFwkFonts.js"></script>
        <script language="Javascript" src="framework/jsGFwkIO.js"></script>
        <script language="Javascript" src="framework/jsGFwkCollisions.js"></script>
        <script language="Javascript" src="framework/jsGFwkContainer.js"></script>
        <script language="Javascript" src="framework/jsGFwkGamepad.js"></script>
        <script language="Javascript" src="framework/jsGFwkRM.js"></script>
	    <script language="Javascript" src="framework/jsGFwkSprites.js"></script>
        <script language="Javascript" src="framework/jsGFwkWebStorage.js"></script>
        <script language="Javascript" src="framework/jsGFwkScenes.js"></script>
        <script language="Javascript" src="framework/jsGFwkWebStorage.js"></script>
        <script language="Javascript" src="framework/jsGFwkGamepad.js"></script>
        <script language="Javascript" src="framework/jsGFwkUtils.js"></script>
        <script language="Javascript" src="framework/jsGFwkTimers.js"></script>
        <script language="Javascript" src="curve.js"></script>
        <script language="Javascript" src="enemy.js"></script>
        <script language="Javascript" src="enemyController.js"></script>
        <script language="Javascript" src="mapBuilder.js"></script>
        <script>

            jsGFwk.settings.canvas = "canvas";
            jsGFwk.settings.clearColor = "#5C94FC";
            jsGFwk.settings.frameRate = 1000 / 60;

            jsGFwk.include("FastAnimation");
            jsGFwk.include("IO");
            jsGFwk.include("Collisions");
            jsGFwk.include("Gamepad");
            jsGFwk.include("ResourceManager");
    		jsGFwk.include("Sprites");
            jsGFwk.include("Fonts");
            jsGFwk.include("Storage");
            jsGFwk.include("Scenes");
            jsGFwk.include("Utils");

            jsGFwk.Fonts.createFont({ name: 'zxBold', source: 'zxBold.ttf' });

            var globalObjects = { };
            var splash = new Image();

            splash.onload = function () {
                jsGFwk.start();
            };
            splash.src = "images/intro.png";

            jsGFwk.ResourceManager.addGraphic({ name: "intro", source: "images/intro.png" });
            jsGFwk.ResourceManager.addGraphic({ name: "map1", source: "images/map1.png" });

            jsGFwk.createObject({
                id: "progress",
                visible: true,
                barWidth: 0,
                init: function() {
                    jsGFwk.ResourceManager.onResourcesLoadedCompleted = function() {

                        globalObjects.enemiesContainer = jsGFwk.Container.createContainer('enemies', Enemy, true);

                        jsGFwk.Scenes.create({name: "game",
                            gameObjects: [globalObjects.enemiesContainer, Curve, EnemyController] });

                        jsGFwk.Scenes.scenes.game.enable();
                        jsGFwk._gameObjects.progress.destroy();
                    };
                },
                update: function(delta) {
                },
                draw: function (context) {
                    context.drawImage(splash, 10, 10);
                    context.fillStyle = "white";
                    context.font = "11pt times";
                    context.fillText("Loading...", 250, 220);
                }
            });
        </script>
    </body>
</html>
